{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { ApiclientService } from 'src/app/apiclient.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/apiclient.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ManagerUsersCreateComponent_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 12);\n    i0.ɵɵlistener(\"click\", function ManagerUsersCreateComponent_a_9_Template_a_click_0_listener() {\n      const item_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      ctx_r2.groupId = item_r2.id;\n      return i0.ɵɵresetView(ctx_r2.groupName = item_r2.readableId);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r2.readableId);\n  }\n}\nfunction ManagerUsersCreateComponent_a_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 12);\n    i0.ɵɵlistener(\"click\", function ManagerUsersCreateComponent_a_16_Template_a_click_0_listener() {\n      const item_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      ctx_r2.roleId = item_r5.id;\n      return i0.ɵɵresetView(ctx_r2.roleName = item_r5.name);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r5.name);\n  }\n}\nfunction ManagerUsersCreateComponent_a_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function ManagerUsersCreateComponent_a_34_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.create());\n    });\n    i0.ɵɵtext(1, \"Create\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ManagerUsersCreateComponent_a_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 14);\n    i0.ɵɵlistener(\"click\", function ManagerUsersCreateComponent_a_35_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.edit());\n    });\n    i0.ɵɵtext(1, \"Update\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ManagerUsersCreateComponent = /*#__PURE__*/(() => {\n  class ManagerUsersCreateComponent {\n    constructor(client, route, toastrService) {\n      this.client = client;\n      this.route = route;\n      this.toastrService = toastrService;\n      this.id = \"\";\n      this.email = \"\";\n      this.firstName = \"\";\n      this.lastName = \"\";\n      this.password = \"\";\n      this.isMEP = \"\";\n      this.groups = [];\n      this.roles = [];\n      this.groupId = \"\";\n      this.roleId = \"\";\n      this.groupName = \"\";\n      this.roleName = \"\";\n    }\n    ngOnInit() {\n      this.id = this.route.snapshot.paramMap.get(\"id\");\n      if (this.id) {\n        this.client.getUser(this.id).subscribe(response => {\n          this.email = response.data.email, this.firstName = response.data.firstName, this.lastName = response.data.lastName, this.password = response.data.password, this.isMEP = response.data.isMEP, this.roleId = response.data.roleId, this.groupId = response.data.groupId;\n        });\n      }\n      this.getGroups();\n      this.getRoles();\n    }\n    getGroups() {\n      this.client.getGroups().subscribe(response => this.groups = response.data);\n    }\n    getRoles() {\n      this.client.getRoles().subscribe(response => this.roles = response.data);\n    }\n    create() {\n      const body = {\n        firstName: this.firstName,\n        lastName: this.lastName,\n        email: this.email,\n        password: this.password,\n        isMEP: Boolean(this.isMEP),\n        roleId: this.roleId,\n        groupId: this.groupId\n      };\n      this.client.createUser(body).subscribe(response => {\n        if (response.data === 'ok') {\n          window.open(\"/users\", \"_self\");\n        } else {\n          this.toastrService.error(response.data);\n        }\n      }, error => {\n        console.log(error);\n        this.toastrService.error(error.error.data);\n      });\n    }\n    edit() {\n      const body = {\n        id: Number(this.id),\n        firstName: this.firstName,\n        lastName: this.lastName,\n        email: this.email,\n        password: this.password,\n        isMEP: Boolean(this.isMEP),\n        roleId: this.roleId,\n        groupId: this.groupId\n      };\n      this.client.editUser(body).subscribe(response => {\n        if (response.data === 'ok') {\n          window.open(\"/users\", \"_self\");\n        } else {\n          this.toastrService.error(response.data);\n        }\n      }, error => {\n        console.log(error);\n        this.toastrService.error(error.error.data);\n      });\n    }\n    static #_ = this.ɵfac = function ManagerUsersCreateComponent_Factory(t) {\n      return new (t || ManagerUsersCreateComponent)(i0.ɵɵdirectiveInject(i1.ApiclientService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ToastrService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ManagerUsersCreateComponent,\n      selectors: [[\"app-manager-users-create\"]],\n      decls: 38,\n      vars: 10,\n      consts: [[1, \"container\"], [1, \"dropdown\"], [1, \"dropbtn\"], [1, \"dropdown-content\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"name\", \"firstName\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"lastName\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"email\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"password\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"btn btn-success\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"/\", 1, \"btn\", \"btn-warning\"], [3, \"click\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"]],\n      template: function ManagerUsersCreateComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \" New user creation: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"h3\");\n          i0.ɵɵtext(4, \"Political group:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 1)(6, \"button\", 2);\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\", 3);\n          i0.ɵɵtemplate(9, ManagerUsersCreateComponent_a_9_Template, 2, 1, \"a\", 4);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"h3\");\n          i0.ɵɵtext(11, \"Role:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 1)(13, \"button\", 2);\n          i0.ɵɵtext(14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 3);\n          i0.ɵɵtemplate(16, ManagerUsersCreateComponent_a_16_Template, 2, 1, \"a\", 4);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"h3\");\n          i0.ɵɵtext(18, \"First Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"input\", 5);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ManagerUsersCreateComponent_Template_input_ngModelChange_19_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.firstName, $event) || (ctx.firstName = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(20, \"br\");\n          i0.ɵɵelementStart(21, \"h3\");\n          i0.ɵɵtext(22, \"Last Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"input\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ManagerUsersCreateComponent_Template_input_ngModelChange_23_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.lastName, $event) || (ctx.lastName = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(24, \"br\");\n          i0.ɵɵelementStart(25, \"h3\");\n          i0.ɵɵtext(26, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"input\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ManagerUsersCreateComponent_Template_input_ngModelChange_27_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.email, $event) || (ctx.email = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(28, \"br\");\n          i0.ɵɵelementStart(29, \"h3\");\n          i0.ɵɵtext(30, \"Password:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"input\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ManagerUsersCreateComponent_Template_input_ngModelChange_31_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(32, \"br\");\n          i0.ɵɵelementStart(33, \"div\");\n          i0.ɵɵtemplate(34, ManagerUsersCreateComponent_a_34_Template, 2, 0, \"a\", 9)(35, ManagerUsersCreateComponent_a_35_Template, 2, 0, \"a\", 10);\n          i0.ɵɵelementStart(36, \"a\", 11);\n          i0.ɵɵtext(37, \"Cancel\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.groupName === \"\" ? \"Select\" : ctx.groupName);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.groups);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.roleName === \"\" ? \"Select\" : ctx.roleName);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.roles);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.firstName);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.lastName);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.email);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", !ctx.id);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.id);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel]\n    });\n  }\n  return ManagerUsersCreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}