{"ast":null,"code":"var _a, _b, _c;\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { MatTableDataSource, MatPaginator, MatSort, MatDialog } from '@angular/material';\nimport { ToastrService } from 'ngx-toastr';\nimport { ApiclientService } from 'src/app/apiclient.service';\nimport { PieComponent } from '../pie/pie.component';\nlet StatisticsComponent = class StatisticsComponent {\n  constructor(client, toastrService, dialog) {\n    this.client = client;\n    this.toastrService = toastrService;\n    this.dialog = dialog;\n    this.selectedValue = 'all';\n    this.displayedColumns = [\"articleName\", \"subArticleName\", \"voteInFavourCount\", \"voteNotInFavourCount\", \"voteNeutralCount\"];\n    this.dataSource = new MatTableDataSource();\n  }\n  ngOnInit() {\n    this.dataSource.paginator = this.paginator;\n    this.dataSource.sort = this.sort;\n    this.client.getStatistics().subscribe(response => {\n      this.data = response.data;\n      this.dataSource.data = this.data;\n      this.groups = this.data.map(i => i.groupName).filter(this.onlyUnique);\n    });\n  }\n  onlyUnique(value, index, array) {\n    return array.indexOf(value) === index;\n  }\n  filter() {\n    if (this.selectedValue.toLowerCase() === 'all') {\n      this.dataSource.data = this.data;\n      return;\n    }\n    this.dataSource.data = this.data.filter(i => i.groupName === this.selectedValue);\n  }\n  clickRow(s) {\n    this.dialog.open(PieComponent, {\n      data: this.data.filter(i => i.subArticleName === s.subArticleName).map(i => {\n        return [{\n          name: 'voteInFavourCount',\n          y: s.voteInFavourCount\n        }, {\n          name: 'voteNeutralCount',\n          y: s.voteNeutralCount\n        }, {\n          name: 's.voteNotInFavourCount',\n          y: s.voteNotInFavourCount\n        }];\n      })\n    });\n  }\n};\n__decorate([ViewChild(MatPaginator, {\n  static: true\n}), __metadata(\"design:type\", typeof (_b = typeof MatPaginator !== \"undefined\" && MatPaginator) === \"function\" ? _b : Object)], StatisticsComponent.prototype, \"paginator\", void 0);\n__decorate([ViewChild(MatSort, {\n  static: true\n}), __metadata(\"design:type\", typeof (_c = typeof MatSort !== \"undefined\" && MatSort) === \"function\" ? _c : Object)], StatisticsComponent.prototype, \"sort\", void 0);\nStatisticsComponent = __decorate([Component({\n  selector: 'app-statistics',\n  templateUrl: './statistics.component.html',\n  styleUrls: ['./statistics.component.css']\n}), __metadata(\"design:paramtypes\", [ApiclientService, ToastrService, typeof (_a = typeof MatDialog !== \"undefined\" && MatDialog) === \"function\" ? _a : Object])], StatisticsComponent);\nexport { StatisticsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}